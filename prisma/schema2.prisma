// Homepage grid section config (persistent)
model GridSection {
  id         Int      @id @default(autoincrement())
  index      Int      @unique // 0, 1, 2 for up to 3 sections
  title      String
  path       String
  productIds String[]
  updatedAt  DateTime @updatedAt
}
generator client {
  provider   = "prisma-client-js"
  engineType = "library"
}

datasource db {
  provider  = "postgresql"
}

// Required for creating a User: id, name, email, image, cart (optional JSON string)
model User {
  id    String @id
  name  String
  email String
  image String
  cart  Json   @default("{}")

  // Relations
  ratings            Rating[]
  Address            Address[]
  store              Store?
  buyerOrders        Order[]         @relation("BuyerRelation")
  wishlistItems      WishlistItem[]
  abandonedCarts     AbandonedCart[]
  returnRequests     ReturnRequest[]
  storeUsers         StoreUser[]
  invitedStoreUsers  StoreUser[]     @relation("InvitedBy")
  approvedStoreUsers StoreUser[]     @relation("ApprovedBy")
}

// Guest user details before account creation
model GuestUser {
  id             String    @id @default(cuid())
  name           String
  email          String    @unique
  phone          String
  accountCreated Boolean   @default(false)
  convertToken   String?   @unique
  tokenExpiry    DateTime?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime  @updatedAt
}

// ...existing code continues...
